"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getSubstringIndex = exports.getContractSchemaString = void 0;
const customSectionString = 'concordium-schema-v1';
const customSectionStringLength = customSectionString.length;
function getContractSchemaString(schemaStr) {
    const getEndIndex = schemaStr.length;
    const getStartindex = getBytePos(schemaStr);
    const contractSchema = schemaStr.substring(getStartindex + customSectionStringLength, getEndIndex);
    return Buffer.from(contractSchema);
}
exports.getContractSchemaString = getContractSchemaString;
function getBytePos(pdfStr) {
    const byteRangePos = getSubstringIndex(pdfStr, customSectionString, 1);
    if (byteRangePos === -1) {
        throw new Error('Failed to locate ByteRange.');
    }
    return byteRangePos;
}
function getSubstringIndex(str, substring, n) {
    let times = 0;
    let index = 0;
    while (times < n && index !== -1) {
        index = str.indexOf(substring, index + 1);
        times++;
    }
    return index;
}
exports.getSubstringIndex = getSubstringIndex;
